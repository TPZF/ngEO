<% if (!dataset) { %> 

    <!-- if no dataset has been selected display an information message to the user -->

	<div id="advancedCriteriaMessage" class="widget-content ui-body-c">
		<p><b>No dataset has been selected.</b></p>
		<p><b>Please select a dataset first to see its advanced criteria </b></p>
	</div>

<% } else { %>	
	
	<!-- if the selected dataset has no advanced criteria display an information message to the user -->
	
	<% if (dataset.attributes.datasetSearchInfo.attributes.length == 0 ) { %>
		<div id="advancedCriteriaMessage" class="widget-content ui-body-c">
			<p><b>The selected dataset : <%=dataset.attributes.id %> </b></p>
			<p><b>Does not have advanced criteria </b></p>
		</div>
	
	<% } else { %>	 		
	
	<!-- 	display search criteria -->
		<form>
			<label id="useAdvancedCriteria_label" for="useAdvancedCriteria_input">Use advanced criteria </label>
			<input type="checkbox" name="useAdvancedCriteria" id="useAdvancedCriteria_input" data-mini="true"/>		

		<% _.each(dataset.attributes.datasetSearchInfo.attributes, function(criterion, i) { %>		
		
			   <!-- the criterion is an enumeration has multiple options so create a select  -->
				<% if (criterion.type == 'enumeration') { %> 

						 <div data-role="fieldcontain">
							
							<fieldset id="<%= criterion.id %>" data-role="controlgroup">
								
								<legend><%= criterion.id %>:</legend>
    	
    							<% _.each(criterion.possibleValues, function(possibleValue) { %>
									 <label id="<%=criterion.id%>_<%=possibleValue.possibleValue%>_label" for="<%=criterion.id%>_<%=possibleValue.possibleValue%>_input"><%=possibleValue.possibleValue%></label>
   						 			 <input type="checkbox" name="<%= criterion.id %>" id="<%=criterion.id%>_<%=possibleValue.possibleValue%>_input" data-mini="true"/>		
								<% }); %>
       							
    						</fieldset>
   						</div>
					
				<!-- the criterion is an integer within a range  -->	
				<% } else if (criterion.type == 'integer' && criterion.rangeMinValue && criterion.rangeMaxValue) { %>	
					

					<div data-role="fieldcontain">
							
							<fieldset id="<%= criterion.id %>" data-role="controlgroup">
								
								<legend><%= criterion.id %>:</legend>
    	
       							 <label for="<%= criterion.id %>_from">from:</label>
   						 		 <input type="range" name="<%= criterion.id %>_from" id="<%= criterion.id %>_from" value="<%= criterion.rangeMinValue %>" min="<%= criterion.rangeMinValue %>" max="<%= criterion.rangeMaxValue %>" data-highlight="true" data-mini="true"/>

								 <label for="<%= criterion.id %>_to">to:</label>
   						 		 <input type="range" name="<%= criterion.id %>_to" id="<%= criterion.id %>_to" value="<%= criterion.rangeMaxValue %>" min="<%= criterion.rangeMinValue %>" max="<%= criterion.rangeMaxValue %>" data-highlight="true" data-mini="true"/>

    						</fieldset>
   					</div>

				<% } else { %>	
					 <label> ERROR: Undefined Criterion type <%= criterion.id %> </label>
				<% } %>
		
				
			<% }); %>
			</form>
	<% } %>
<% } %>