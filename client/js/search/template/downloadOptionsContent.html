<% if (!dataset) { %> 

    <!-- if no dataset has been selected display an information message to the user -->
	<div id="downloadOptionsMessage" class="widget-content ui-body-c">
		<p><b>No dataset has been selected.</b></p>
		<p><b>Please select a dataset first to see its download options</b></p>
	</div>

<% } else { %>	
	
	<!-- if the selected dataset has no download options display an information message to the user -->
	
	<% if (!dataset.get("downloadOptions")) { %>
		<div id="downloadOptionsMessage" class="widget-content ui-body-c">
			<p><b>The selected dataset : <%=dataset.get("datasetId") %> has invalid download options.</b></p>
		</div>
	<% } else if (dataset.get("downloadOptions").length == 0 ) { %>
		<div id="downloadOptionsMessage" class="widget-content ui-body-c">
			<p><b>The selected dataset : <%=dataset.get("datasetId") %> does not have download options.</b></p>
		</div>
	
	<% } else { %>	 		
	
		<!-- 	
				display  download options. 
				See (IICD-WC-WS)-(ngEO-14-ICD-ELC-075)-(Internal ICD Web Client - Web Server) issue 2.12 ยง4.4.3.1.1.2 for more information on the configuration of the downloadOptions 
		-->
		<form>			
			<% _.each(dataset.get("downloadOptions"), function(option, i) { %>		
				<% if (!option.cropProductSearchArea) { %>
					<label id="<%= option.argumentName %>_label" for="<%= option.argumentName %>"><%= option.description %> : </label>
						<select id="<%= option.argumentName %>" data-mini="true" data-theme="c">
						<% if ( attributes[option.argumentName] == "@conflict" ) {  %>
						<option value="" selected style="display: none;"></option>
						<% } %>
						<option value="None">None</option>
						<% _.each(option.value, function(aValue) { %>
							<% if (_.has(attributes, option.argumentName) && (attributes[option.argumentName] == aValue.name)) {  %>						
								<option value="<%= aValue.name%>" selected><%=aValue.humanReadable%></option>
							<% } else { %>	 
			 					<option value="<%= aValue.name%>"><%=aValue.humanReadable%></option>		
							<% } %>	 
						<% }); %>
					</select>	
				<% } %>
			<% }); %>
			
			<% _.each(dataset.get("downloadOptions"), function(option, i) { %>		
				<% if (option.cropProductSearchArea) { %>
					<label id="<%= option.argumentName %>_label" for="<%= option.argumentName %>"><%= option.description %></label>
					<% if (_.has(attributes, option.argumentName) && (attributes[option.argumentName])) {  %>						
						<input type="checkbox" id="<%= option.argumentName %>" checked="checked" data-mini="true"/>
					<% } else { %>	 
						<input type="checkbox" id="<%= option.argumentName %>" data-mini="true"/>		
					<% } %>	 					
				<% } %>			
			<% }); %>
			
		</form>
	
	<% } %>

<% } %>
